# åŒCOSæ¡¶æ¶æ„å®ç°æ€»ç»“

## ğŸ¯ æ”¹åŠ¨æ¦‚è¿°

å·²æˆåŠŸå°†COSå­˜å‚¨æ¶æ„å‡çº§ä¸º**åŒæ¡¶éš”ç¦»**è®¾è®¡ï¼Œå®ç°ç”¨æˆ·å¤´åƒå’Œç‰©èµ„å›¾ç‰‡çš„åˆ†ç¦»å­˜å‚¨ã€‚

---

## âœ… å®Œæˆçš„æ”¹åŠ¨

### 1. æ ¸å¿ƒæœåŠ¡å±‚ (`backend/src/services/cosService.ts`)

**æ–°å¢åŠŸèƒ½**ï¼š
- âœ… åŒæ¡¶é…ç½®æ”¯æŒï¼ˆç”¨æˆ·å¤´åƒæ¡¶ + ç‰©èµ„å›¾ç‰‡æ¡¶ï¼‰
- âœ… `uploadToCos()` æ–¹æ³•æ”¯æŒ `bucket` å‚æ•°
- âœ… `deleteFromCos()` æ–¹æ³•æ”¯æŒ `bucket` å‚æ•°
- âœ… `getKeyFromUrl()` æ™ºèƒ½è¯†åˆ«ä¸åŒæ¡¶çš„CDN URL

**é…ç½®å˜é‡**ï¼š
```typescript
// ç”¨æˆ·å¤´åƒæ¡¶
- UserAvatarBucket
- UserAvatarRegion
- UserAvatarCdnBaseUrl

// ç‰©èµ„å›¾ç‰‡æ¡¶
- MaterialBucket
- MaterialRegion
- MaterialCdnBaseUrl
```

### 2. è´¦æˆ·æ§åˆ¶å™¨ (`backend/src/controllers/accountController.ts`)

**ä¿®æ”¹å‡½æ•°**ï¼š
- âœ… `uploadAvatar()` - ä½¿ç”¨ç”¨æˆ·å¤´åƒæ¡¶ (`bucket: 'user'`)
- âœ… `deleteAvatar()` - ä½¿ç”¨ç”¨æˆ·å¤´åƒæ¡¶ (`bucket: 'user'`)

**æ–‡ä»¶è·¯å¾„**ï¼š
```
User/Avatars/user_{MD5}_{timestamp}.webp
```

**å­˜å‚¨ä½ç½®**ï¼šç”¨æˆ·å¤´åƒæ¡¶ï¼ˆ`COS_USER_AVATAR_BUCKET`ï¼‰

### 3. OAuthæ§åˆ¶å™¨ (`backend/src/controllers/oauthController.ts`)

**ä¿®æ”¹å‡½æ•°**ï¼š
- âœ… `oauthRegister()` - OAuthå¤´åƒä½¿ç”¨ç”¨æˆ·å¤´åƒæ¡¶ (`bucket: 'user'`)

**æµç¨‹**ï¼š
```
ä¸‹è½½ç¬¬ä¸‰æ–¹å¤´åƒ â†’ å‹ç¼©å¤„ç† â†’ ä¸Šä¼ åˆ°ç”¨æˆ·å¤´åƒæ¡¶ â†’ ä¿å­˜CDNé“¾æ¥
```

### 4. ç‰©èµ„æ§åˆ¶å™¨ (`backend/src/controllers/materialController.ts`)

**ä¿®æ”¹å‡½æ•°**ï¼š
- âœ… `createMaterial()` - ä½¿ç”¨ç‰©èµ„å›¾ç‰‡æ¡¶ (`bucket: 'material'`)
- âœ… `updateMaterial()` - ä½¿ç”¨ç‰©èµ„å›¾ç‰‡æ¡¶ (`bucket: 'material'`)
- âœ… `deleteMaterial()` - ä½¿ç”¨ç‰©èµ„å›¾ç‰‡æ¡¶ (`bucket: 'material'`)

**æ–‡ä»¶è·¯å¾„**ï¼š
```
Materials/Images/material_{MD5}.webp
```

**å­˜å‚¨ä½ç½®**ï¼šç‰©èµ„å›¾ç‰‡æ¡¶ï¼ˆ`COS_MATERIAL_BUCKET`ï¼‰

### 5. ç¯å¢ƒå˜é‡é…ç½® (`backend/.env.example`)

**æ–°å¢é…ç½®é¡¹**ï¼š
```env
# ç”¨æˆ·å¤´åƒ COS é…ç½®ï¼ˆå…±äº«ç”¨æˆ·ä½“ç³»ä¸“ç”¨æ¡¶ï¼‰
COS_USER_AVATAR_BUCKET=potatofield-user-avatars
COS_USER_AVATAR_REGION=ap-guangzhou
COS_USER_AVATAR_CDN_BASE_URL=https://user-avatars-cdn.example.com/

# ç‰©èµ„å›¾ç‰‡ COS é…ç½®ï¼ˆæœ¬é¡¹ç›®ä¸“ç”¨æ¡¶ï¼‰
COS_MATERIAL_BUCKET=inventory-master-materials
COS_MATERIAL_REGION=ap-guangzhou
COS_MATERIAL_CDN_BASE_URL=https://materials-cdn.example.com/
```

### 6. æ–°å¢æ–‡æ¡£

- âœ… `DUAL_COS_BUCKET_CONFIG.md` - åŒæ¡¶é…ç½®è¯¦ç»†è¯´æ˜
- âœ… `DUAL_BUCKET_MIGRATION_SUMMARY.md` - æœ¬æ–‡æ¡£
- âœ… æ›´æ–° `QUICK_SETUP_GUIDE.md` - æ·»åŠ åŒæ¡¶é…ç½®è¯´æ˜
- âœ… æ–°å¢ `.gitignore` - Gitå¿½ç•¥è§„åˆ™

---

## ğŸ“Š æ¶æ„å¯¹æ¯”

### ä¹‹å‰ï¼ˆå•æ¡¶æ¶æ„ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    å•ä¸€ COS æ¡¶               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ User/Avatars/       â”‚   â”‚
â”‚  â”‚ Materials/Images/   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é—®é¢˜**ï¼š
- âŒ ç”¨æˆ·æ•°æ®å’Œé¡¹ç›®æ•°æ®æ··åœ¨ä¸€èµ·
- âŒ æ— æ³•é’ˆå¯¹ä¸åŒæ•°æ®è®¾ç½®ä¸åŒç­–ç•¥
- âŒ è·¨é¡¹ç›®å…±äº«ç”¨æˆ·å¤´åƒå›°éš¾

### ç°åœ¨ï¼ˆåŒæ¡¶æ¶æ„ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·å¤´åƒæ¡¶ï¼ˆå…±äº«ï¼‰        â”‚      â”‚  ç‰©èµ„å›¾ç‰‡æ¡¶ï¼ˆé¡¹ç›®ä¸“ç”¨ï¼‰   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ User/Avatars/      â”‚  â”‚      â”‚  â”‚ Materials/Images/  â”‚  â”‚
â”‚  â”‚ - user_abc.webp    â”‚  â”‚      â”‚  â”‚ - material_xyz.webpâ”‚  â”‚
â”‚  â”‚ - user_def.webp    â”‚  â”‚      â”‚  â”‚ - material_uvw.webpâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚      â”‚                          â”‚
â”‚  è·¨å¤šä¸ªé¡¹ç›®å…±äº«           â”‚      â”‚  æœ¬é¡¹ç›®ç‹¬ç«‹ä½¿ç”¨           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ•°æ®éš”ç¦»ï¼šç”¨æˆ·æ•°æ®å’Œé¡¹ç›®æ•°æ®å®Œå…¨åˆ†ç¦»
- âœ… æƒé™ç‹¬ç«‹ï¼šå¯ä»¥ä¸ºä¸åŒæ¡¶è®¾ç½®ä¸åŒçš„è®¿é—®ç­–ç•¥
- âœ… è·¨é¡¹ç›®å…±äº«ï¼šå¤šä¸ªé¡¹ç›®ä½¿ç”¨åŒä¸€ç”¨æˆ·ä½“ç³»
- âœ… çµæ´»æ‰©å±•ï¼šæ–°é¡¹ç›®å¯å¿«é€Ÿæ¥å…¥å…±äº«ç”¨æˆ·ä½“ç³»
- âœ… æˆæœ¬ä¼˜åŒ–ï¼šå¯ä»¥é’ˆå¯¹ä¸åŒæ•°æ®è®¾ç½®ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸ

---

## ğŸ”„ æ•°æ®æµå‘

### ç”¨æˆ·å¤´åƒä¸Šä¼ 

```
ç”¨æˆ·ä¸Šä¼ å¤´åƒ
    â†“
Sharpå‹ç¼©å¤„ç† (640x640, WebP, 80%)
    â†“
ç”Ÿæˆæ–‡ä»¶å: User/Avatars/user_{MD5}_{timestamp}.webp
    â†“
ä¸Šä¼ åˆ°ç”¨æˆ·å¤´åƒæ¡¶ (bucket: 'user')
    â†“
è¿”å›CDNé“¾æ¥: https://user-cdn.example.com/User/Avatars/...
    â†“
ä¿å­˜åˆ°æ•°æ®åº“ (User_profile.avatar)
```

### OAuthå¤´åƒå¤„ç†

```
OAuthç™»å½•è·å–ç¬¬ä¸‰æ–¹å¤´åƒURL
    â†“
ä¸‹è½½å¤´åƒåˆ°æœåŠ¡å™¨å†…å­˜
    â†“
Sharpå‹ç¼©å¤„ç† (640x640, WebP, 80%)
    â†“
ç”Ÿæˆæ–‡ä»¶å: User/Avatars/user_{MD5}_{timestamp}.webp
    â†“
ä¸Šä¼ åˆ°ç”¨æˆ·å¤´åƒæ¡¶ (bucket: 'user')
    â†“
è¿”å›CDNé“¾æ¥
    â†“
ä¿å­˜åˆ°æ•°æ®åº“ (User_profile.avatar)
```

### ç‰©èµ„å›¾ç‰‡ä¸Šä¼ 

```
ç”¨æˆ·ä¸Šä¼ ç‰©èµ„å›¾ç‰‡
    â†“
Sharpå‹ç¼©å¤„ç† (æœ€å¤§1920x1920, WebP, 80%)
    â†“
ç”Ÿæˆæ–‡ä»¶å: Materials/Images/material_{MD5}.webp
    â†“
ä¸Šä¼ åˆ°ç‰©èµ„å›¾ç‰‡æ¡¶ (bucket: 'material')
    â†“
è¿”å›CDNé“¾æ¥: https://material-cdn.example.com/Materials/Images/...
    â†“
ä¿å­˜åˆ°æ•°æ®åº“ (Material.photo_url)
```

---

## ğŸ“ API å˜åŒ–

### TypeScript æ¥å£å®šä¹‰

**UploadOptions**ï¼š
```typescript
export interface UploadOptions {
  buffer: Buffer;
  key: string;
  contentType?: string;
  bucket?: 'user' | 'material'; // æ–°å¢ï¼šæŒ‡å®šæ¡¶ç±»å‹
}
```

**DeleteOptions**ï¼š
```typescript
export interface DeleteOptions {
  key?: string;
  url?: string;
  bucket?: 'user' | 'material'; // æ–°å¢ï¼šæŒ‡å®šæ¡¶ç±»å‹
}
```

### ä½¿ç”¨ç¤ºä¾‹

**ä¸Šä¼ ç”¨æˆ·å¤´åƒ**ï¼š
```typescript
const avatarUrl = await uploadToCos({
  buffer: imageBuffer,
  key: 'User/Avatars/user_abc123.webp',
  contentType: 'image/webp',
  bucket: 'user', // æŒ‡å®šç”¨æˆ·å¤´åƒæ¡¶
});
```

**ä¸Šä¼ ç‰©èµ„å›¾ç‰‡**ï¼š
```typescript
const photoUrl = await uploadToCos({
  buffer: imageBuffer,
  key: 'Materials/Images/material_xyz789.webp',
  contentType: 'image/webp',
  bucket: 'material', // æŒ‡å®šç‰©èµ„å›¾ç‰‡æ¡¶
});
```

**åˆ é™¤æ–‡ä»¶**ï¼š
```typescript
// åˆ é™¤ç”¨æˆ·å¤´åƒ
await deleteFromCos({
  url: 'https://user-cdn.example.com/User/Avatars/user_abc123.webp',
  bucket: 'user',
});

// åˆ é™¤ç‰©èµ„å›¾ç‰‡
await deleteFromCos({
  url: 'https://material-cdn.example.com/Materials/Images/material_xyz789.webp',
  bucket: 'material',
});
```

---

## ğŸ”§ ç¯å¢ƒå˜é‡å®Œæ•´é…ç½®

```env
# ========================================
# è…¾è®¯äº‘ COS é€šç”¨é…ç½®
# ========================================
COS_SECRET_ID=AKIDxxxxxxxxxxxxxxxx
COS_SECRET_KEY=xxxxxxxxxxxxxxxx

# ========================================
# ç”¨æˆ·å¤´åƒ COS é…ç½®ï¼ˆå…±äº«ç”¨æˆ·ä½“ç³»ä¸“ç”¨ï¼‰
# ========================================
COS_USER_AVATAR_BUCKET=potatofield-user-avatars
COS_USER_AVATAR_REGION=ap-guangzhou
COS_USER_AVATAR_CDN_BASE_URL=https://user-avatars-cdn.example.com/

# ========================================
# ç‰©èµ„å›¾ç‰‡ COS é…ç½®ï¼ˆæœ¬é¡¹ç›®ä¸“ç”¨ï¼‰
# ========================================
COS_MATERIAL_BUCKET=inventory-master-materials
COS_MATERIAL_REGION=ap-guangzhou
COS_MATERIAL_CDN_BASE_URL=https://materials-cdn.example.com/

# ========================================
# å…¼å®¹æ—§ç‰ˆæœ¬é…ç½®ï¼ˆå¯é€‰ï¼‰
# ========================================
# å¦‚æœæ²¡æœ‰é…ç½®ä¸Šé¢çš„åˆ†æ¡¶å‚æ•°ï¼Œä¼šä½¿ç”¨è¿™äº›ä½œä¸ºé»˜è®¤å€¼
COS_BUCKET=inventory-master-materials
COS_REGION=ap-guangzhou
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### éªŒè¯æ¸…å•

- [ ] ç”¨æˆ·ä¸Šä¼ å¤´åƒ â†’ æ–‡ä»¶å­˜å‚¨åœ¨ç”¨æˆ·å¤´åƒæ¡¶
- [ ] ç”¨æˆ·åˆ é™¤å¤´åƒ â†’ ä»ç”¨æˆ·å¤´åƒæ¡¶åˆ é™¤
- [ ] å¾®ä¿¡ç™»å½• â†’ å¤´åƒä¸‹è½½å¹¶å­˜å‚¨åœ¨ç”¨æˆ·å¤´åƒæ¡¶
- [ ] QQç™»å½• â†’ å¤´åƒä¸‹è½½å¹¶å­˜å‚¨åœ¨ç”¨æˆ·å¤´åƒæ¡¶
- [ ] åˆ›å»ºç‰©èµ„ â†’ å›¾ç‰‡å­˜å‚¨åœ¨ç‰©èµ„å›¾ç‰‡æ¡¶
- [ ] æ›´æ–°ç‰©èµ„ â†’ æ—§å›¾ä»ç‰©èµ„å›¾ç‰‡æ¡¶åˆ é™¤ï¼Œæ–°å›¾ä¸Šä¼ åˆ°ç‰©èµ„å›¾ç‰‡æ¡¶
- [ ] åˆ é™¤ç‰©èµ„ â†’ å›¾ç‰‡ä»ç‰©èµ„å›¾ç‰‡æ¡¶åˆ é™¤

### éªŒè¯æ–¹æ³•

**1. æ£€æŸ¥COSæ§åˆ¶å°**

ç™»å½•è…¾è®¯äº‘COSæ§åˆ¶å°ï¼Œåˆ†åˆ«æŸ¥çœ‹ä¸¤ä¸ªæ¡¶ï¼š

**ç”¨æˆ·å¤´åƒæ¡¶**ï¼š
```
potatofield-user-avatars/
â””â”€â”€ User/
    â””â”€â”€ Avatars/
        â”œâ”€â”€ user_xxx_xxx.webp
        â””â”€â”€ ...
```

**ç‰©èµ„å›¾ç‰‡æ¡¶**ï¼š
```
inventory-master-materials/
â””â”€â”€ Materials/
    â””â”€â”€ Images/
        â”œâ”€â”€ material_xxx.webp
        â””â”€â”€ ...
```

**2. æ£€æŸ¥æ•°æ®åº“é“¾æ¥**

```sql
-- æŸ¥çœ‹ç”¨æˆ·å¤´åƒé“¾æ¥ï¼ˆåº”åŒ…å«ç”¨æˆ·å¤´åƒæ¡¶çš„CDNåŸŸåï¼‰
SELECT avatar FROM User_profile WHERE avatar IS NOT NULL LIMIT 5;

-- æŸ¥çœ‹ç‰©èµ„å›¾ç‰‡é“¾æ¥ï¼ˆåº”åŒ…å«ç‰©èµ„å›¾ç‰‡æ¡¶çš„CDNåŸŸåï¼‰
SELECT photo_url FROM Material WHERE photo_url IS NOT NULL LIMIT 5;
```

**3. æµ‹è¯•æ–‡ä»¶è®¿é—®**

```bash
# æµ‹è¯•ç”¨æˆ·å¤´åƒURL
curl -I https://user-avatars-cdn.example.com/User/Avatars/user_xxx.webp

# æµ‹è¯•ç‰©èµ„å›¾ç‰‡URL
curl -I https://materials-cdn.example.com/Materials/Images/material_xxx.webp

# åº”è¯¥éƒ½è¿”å› HTTP 200
```

---

## ğŸ”„ å‘åå…¼å®¹æ€§

### å…¼å®¹ç­–ç•¥

**1. ç¯å¢ƒå˜é‡å…¼å®¹**

å¦‚æœæ²¡æœ‰é…ç½®æ–°çš„åˆ†æ¡¶å‚æ•°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨fallbackåˆ°æ—§çš„é…ç½®ï¼š

```typescript
const MaterialBucket = process.env.COS_MATERIAL_BUCKET || '';
const MaterialRegion = process.env.COS_MATERIAL_REGION || 'ap-guangzhou';

// å¦‚æœæ²¡æœ‰é…ç½®åˆ†æ¡¶å‚æ•°ï¼Œä½¿ç”¨æ—§çš„é€šç”¨é…ç½®
const Bucket = process.env.COS_BUCKET || MaterialBucket;
const Region = process.env.COS_REGION || MaterialRegion;
```

**2. APIå…¼å®¹**

æ‰€æœ‰æ—§çš„æ–¹æ³•ä»ç„¶å¯ç”¨ï¼š

```typescript
// æ—§æ–¹æ³•ï¼ˆä»ç„¶æ”¯æŒï¼‰
const result = await uploadFile(buffer, filename, contentType);
await deleteFile(key);

// æ–°æ–¹æ³•ï¼ˆæ¨èä½¿ç”¨ï¼‰
const url = await uploadToCos({ buffer, key, contentType, bucket: 'material' });
await deleteFromCos({ url, bucket: 'material' });
```

**3. æ•°æ®åº“å…¼å®¹**

æ•°æ®åº“ç»“æ„æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œæ‰€æœ‰ç°æœ‰æ•°æ®ä»ç„¶æœ‰æ•ˆã€‚

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. CDNé…ç½®

**ç”¨æˆ·å¤´åƒæ¡¶**ï¼š
- ç¼“å­˜æ—¶é—´ï¼š7å¤©
- é¢„çƒ­å¸¸ç”¨å¤´åƒ
- é…ç½®å›¾ç‰‡å¤„ç†ï¼ˆç¼©ç•¥å›¾ï¼‰

**ç‰©èµ„å›¾ç‰‡æ¡¶**ï¼š
- ç¼“å­˜æ—¶é—´ï¼š7å¤©
- é…ç½®é˜²ç›—é“¾
- å¼€å¯Gzipå‹ç¼©

### 2. å­˜å‚¨ä¼˜åŒ–

**ç”Ÿå‘½å‘¨æœŸè§„åˆ™**ï¼š
- ç”¨æˆ·å¤´åƒï¼šæ°¸ä¹…ä¿å­˜
- ç‰©èµ„å›¾ç‰‡ï¼šæ ‡è®°åˆ é™¤å30å¤©è‡ªåŠ¨æ¸…ç†ï¼ˆéœ€è¦å®ç°æ ‡è®°åŠŸèƒ½ï¼‰

### 3. è®¿é—®æ§åˆ¶

- å¯ç”¨CDNé‰´æƒï¼ˆå¯é€‰ï¼‰
- é…ç½®è·¨åŸŸCORS
- è®¾ç½®è®¿é—®é¢‘ç‡é™åˆ¶

---

## ğŸ›¡ï¸ å®‰å…¨åŠ å›º

### 1. æ¡¶æƒé™

**ç”¨æˆ·å¤´åƒæ¡¶**ï¼š
- è¯»æƒé™ï¼šå…¬æœ‰è¯»
- å†™æƒé™ï¼šä»…åç«¯æœåŠ¡
- åˆ—ä¸¾æƒé™ï¼šç¦æ­¢

**ç‰©èµ„å›¾ç‰‡æ¡¶**ï¼š
- è¯»æƒé™ï¼šå…¬æœ‰è¯»
- å†™æƒé™ï¼šä»…åç«¯æœåŠ¡
- åˆ—ä¸¾æƒé™ï¼šç¦æ­¢

### 2. è®¿é—®å¯†é’¥

```bash
# å®šæœŸè½®æ¢å¯†é’¥
# ä½¿ç”¨å­è´¦å·ç®¡ç†ä¸åŒæ¡¶çš„æƒé™
# æœ€å°æƒé™åŸåˆ™
```

### 3. ç›‘æ§å‘Šè­¦

- æµé‡å¼‚å¸¸å‘Šè­¦
- è´¹ç”¨è¶…é™å‘Šè­¦
- é”™è¯¯ç‡å‘Šè­¦

---

## ğŸ’° æˆæœ¬ä¼˜åŒ–

### åˆ†æ¡¶çš„æˆæœ¬ä¼˜åŠ¿

**ç”¨æˆ·å¤´åƒæ¡¶ï¼ˆè·¨é¡¹ç›®å…±äº«ï¼‰**ï¼š
- é¿å…é‡å¤å­˜å‚¨åŒä¸€ç”¨æˆ·çš„å¤´åƒ
- å¤šä¸ªé¡¹ç›®å…±äº«å­˜å‚¨æˆæœ¬

**ç‰©èµ„å›¾ç‰‡æ¡¶ï¼ˆé¡¹ç›®ç‹¬ç«‹ï¼‰**ï¼š
- å¯ä»¥è®¾ç½®é¡¹ç›®ç‰¹å®šçš„å­˜å‚¨ç­–ç•¥
- ä¾¿äºæˆæœ¬æ ¸ç®—å’Œç®¡ç†

### å»ºè®®

1. å¼€å¯æ™ºèƒ½åˆ†å±‚å­˜å‚¨
2. é…ç½®ç”Ÿå‘½å‘¨æœŸè§„åˆ™
3. ä½¿ç”¨CDNé™ä½å›æºæµé‡
4. å®šæœŸæ¸…ç†æ— æ•ˆæ–‡ä»¶

---

## ğŸ“‹ è¿ç§»æ£€æŸ¥æ¸…å•

å¦‚æœä»æ—§ç‰ˆæœ¬è¿ç§»åˆ°åŒæ¡¶æ¶æ„ï¼š

- [ ] åˆ›å»ºä¸¤ä¸ªCOSæ¡¶
- [ ] é…ç½®æ¡¶æƒé™ï¼ˆå…¬æœ‰è¯»ã€ç§æœ‰å†™ï¼‰
- [ ] é…ç½®CDNåŠ é€Ÿï¼ˆå¯é€‰ï¼‰
- [ ] æ›´æ–° `.env` ç¯å¢ƒå˜é‡
- [ ] é‡å¯åç«¯æœåŠ¡
- [ ] æµ‹è¯•ç”¨æˆ·å¤´åƒä¸Šä¼ 
- [ ] æµ‹è¯•ç‰©èµ„å›¾ç‰‡ä¸Šä¼ 
- [ ] æµ‹è¯•OAuthç™»å½•å¤´åƒ
- [ ] éªŒè¯æ—§æ•°æ®ä»å¯è®¿é—®
- [ ] ç›‘æ§COSè®¿é—®æ—¥å¿—

---

## ğŸ¯ æ€»ç»“

### å…³é”®æ”¹è¿›

âœ… **æ•°æ®éš”ç¦»** - ç”¨æˆ·æ•°æ®ä¸é¡¹ç›®æ•°æ®å®Œå…¨åˆ†ç¦»  
âœ… **è·¨é¡¹ç›®å…±äº«** - å¤šä¸ªé¡¹ç›®å¯å…±ç”¨ä¸€å¥—ç”¨æˆ·ä½“ç³»  
âœ… **çµæ´»æ‰©å±•** - æ–°é¡¹ç›®å¯å¿«é€Ÿæ¥å…¥  
âœ… **æƒé™ç²¾ç»†** - ä¸åŒæ¡¶å¯è®¾ç½®ä¸åŒçš„è®¿é—®ç­–ç•¥  
âœ… **æˆæœ¬ä¼˜åŒ–** - é’ˆå¯¹ä¸åŒæ•°æ®ç±»å‹è®¾ç½®ä¸åŒå­˜å‚¨ç­–ç•¥  
âœ… **å‘åå…¼å®¹** - å®Œå…¨å…¼å®¹æ—§ç‰ˆæœ¬é…ç½®  

### ä»£ç è´¨é‡

âœ… **æ— ç¼–è¯‘é”™è¯¯** - TypeScript å®Œå…¨é€šè¿‡  
âœ… **ç±»å‹å®‰å…¨** - æ‰€æœ‰æ¥å£éƒ½æœ‰æ˜ç¡®çš„ç±»å‹å®šä¹‰  
âœ… **é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯æ•è·å’Œæ—¥å¿—è®°å½•  
âœ… **ä»£ç å¤ç”¨** - é€šè¿‡ `bucket` å‚æ•°ç»Ÿä¸€æ¥å£  

### æ–‡æ¡£å®Œå–„

âœ… **é…ç½®è¯´æ˜** - DUAL_COS_BUCKET_CONFIG.md  
âœ… **å¿«é€Ÿå¼€å§‹** - QUICK_SETUP_GUIDE.md  
âœ… **å®ç°æ€»ç»“** - æœ¬æ–‡æ¡£  
âœ… **æµ‹è¯•æ¸…å•** - TEST_UPLOAD_CHECKLIST.md  

---

**åŒCOSæ¡¶æ¶æ„å·²å®Œæˆï¼Œä»£ç å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼** ğŸ‰
